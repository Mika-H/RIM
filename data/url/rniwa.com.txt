http://dvcs.w3.org/hg/undomanager/raw-file/tip/undomanager.html~http://rniwa.com/editing/undomanager.html
